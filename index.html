<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Easy Money App</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
:root {
  --gold: #f3e5ab;
  --glass: rgba(0,0,0,0.6);
  --border: rgba(255,255,255,0.15);
  --btn-dark: rgba(0,0,0,0.5);
}

body{
  margin:0;
  font-family:'Arial Black',sans-serif;
  background: radial-gradient(circle at center,#1b3d2f 0%,#000 100%);
  color:white;
  height:100vh;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}

.header{
  display:flex;
  justify-content:flex-end;
  padding:20px;
  gap:12px;
  z-index:10;
}
.header-balance{
  background:var(--glass);
  backdrop-filter:blur(10px);
  padding:8px 16px;
  border-radius:12px;
  border:1px solid var(--border);
  font-weight:bold;
  color:var(--gold);
}
.notif-btn{
  background:var(--glass);
  width:40px;
  height:40px;
  border-radius:12px;
  border:1px solid var(--border);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}

.app-title{
  text-align:center;
  font-size:44px;
  color:var(--gold);
  text-transform:uppercase;
  text-shadow:0 4px 10px rgba(0,0,0,0.9);
  margin-top:10px;
  letter-spacing:-2px;
}

.main-container{
  flex:1;
  padding:0 25px;
  overflow-y:auto;
  padding-bottom:160px;
}

.glass-card{
  background:var(--glass);
  backdrop-filter:blur(20px);
  -webkit-backdrop-filter:blur(20px);
  border-radius:15px;
  padding:25px;
  border:1px solid var(--border);
  box-shadow:0 10px 30px rgba(0,0,0,0.5);
  text-align:center;
  margin-bottom:15px;
}

.page{display:none;}
.page.active{display:block;animation:fadeIn .3s;}
@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}

.avatar{
  width:80px;
  height:80px;
  border-radius:15px;
  background:#333;
  margin-bottom:15px;
  border:2px solid var(--gold);
}

.bottom-dock{
  position:fixed;
  bottom:-5px;
  left:0;
  width:100%;
  height:125px;
  background:rgba(255,255,255,0.1);
  backdrop-filter:blur(30px);
  -webkit-backdrop-filter:blur(30px);
  border-radius:50px 50px 0 0;
  border-top:1px solid var(--border);
  display:flex;
  justify-content:center;
  padding-top:25px;
  z-index:100;
}

.nav-container{
  display:flex;
  width:90%;
  justify-content:space-around;
}

.nav-item{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px 22px;
  border-radius:35px;
  color:white;
  cursor:pointer;
  font-weight:bold;
  transition:.3s;
  background:var(--btn-dark);
}

.action-btn{
  padding:14px 22px;
  border:none;
  border-radius:18px;
  background:var(--btn-dark);
  color:white;
  font-weight:bold;
  cursor:pointer;
  margin-top:12px;
}

</style>
</head>
<body>
<div class="header">
  <div class="header-balance">–ë–∞–ª–∞–Ω—Å: <span id="top-balance">0</span>‚ÇΩ</div>
</div>

<div class="app-title">Easy Money</div>

<div class="main-container">

  <!-- EARN -->
  <div id="earn" class="page active">
    <div class="glass-card">
      <h2 style="color:var(--gold)">–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –¥—Ä—É–∑–µ–π</h2>
      <p>1 –¥—Ä—É–≥ = <b>10‚ÇΩ</b> + 200 —ç–Ω–µ—Ä–≥–∏–∏</p>
      <button class="action-btn" onclick="copyRef()">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
    </div>
    <div class="glass-card">
      <h2 style="color:var(--gold)">–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π</h2>
      <div id="tasks-list"></div>
    </div>
    <div class="glass-card">
      <h2 style="color:var(--gold)">–ö–ª–∏–∫–∏</h2>
      <div>–≠–Ω–µ—Ä–≥–∏—è: <span id="energy">1000</span>/1000</div>
      <div style="font-size:80px;cursor:pointer;margin-top:20px;" onclick="tap()">ü™ô</div>
    </div>
  </div>

  <!-- PROFILE -->
  <div id="profile" class="page">
    <div class="glass-card">
      <img id="user-avatar" class="avatar" src="https://via.placeholder.com/80" alt="Ava">
      <h2 id="user-name">User</h2>
      <p>–ë–∞–ª–∞–Ω—Å: <span id="profile-balance">0</span>‚ÇΩ</p>
      <h3 style="color:var(--gold)">–ò—Å—Ç–æ—Ä–∏—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π</h3>
      <div id="history-log" style="text-align:left;"></div>
    </div>
  </div>

  <!-- INFO -->
  <div id="info" class="page">
    <div class="glass-card">
      <h2 style="color:var(--gold)">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
      <button class="action-btn" onclick="tg.openTelegramLink('https://t.me/news')">–ù–æ–≤–æ—Å—Ç–∏</button>
      <button class="action-btn" onclick="tg.openTelegramLink('https://t.me/sup')">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</button>
      <div id="admin-btn-container"></div>
    </div>
  </div>

  <!-- ADMIN (—Å–∫—Ä—ã—Ç–æ, —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–≤–æ–µ–≥–æ ID) -->
  <div id="admin" class="page">
    <div class="glass-card">
      <h2 style="color:var(--gold)">–ê–¥–º–∏–Ω–∫–∞</h2>
      <div id="admin-tasks"></div>
    </div>
  </div>

</div>

<div class="bottom-dock">
  <div class="nav-container">
    <div class="nav-item active" id="nav-earn" onclick="showPage('earn')">üí∞</div>
    <div class="nav-item" id="nav-profile" onclick="showPage('profile')">üë§</div>
    <div class="nav-item" id="nav-info" onclick="showPage('info')">‚ÑπÔ∏è</div>
    <div class="nav-item" id="nav-admin" style="display:none" onclick="showPage('admin')">üõ†</div>
  </div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

let balance = 0;
let energy = 1000;
const adminID = 7020322752;
const userID = tg.initDataUnsafe?.user?.id || 0;
const historyLog = document.getElementById('history-log');

if(tg.initDataUnsafe?.user){
  document.getElementById('user-name').innerText = tg.initDataUnsafe.user.first_name;
  if(tg.initDataUnsafe.user.photo_url) document.getElementById('user-avatar').src = tg.initDataUnsafe.user.photo_url;
}

// Show admin button only for adminID
if(userID == adminID){
  document.getElementById('nav-admin').style.display='flex';
  const adminBtnContainer = document.getElementById('admin-btn-container');
  const btn = document.createElement('button');
  btn.innerText = "–û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω–∫—É";
  btn.className = "action-btn";
  btn.onclick = ()=> showPage('admin');
  adminBtnContainer.appendChild(btn);
}

function showPage(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  const navId = document.getElementById('nav-'+id);
  if(navId) navId.classList.add('active');
}

function addHistory(reason, amount){
  const item = document.createElement('div');
  item.innerHTML = `<span>${reason}</span> <span style="color:var(--gold)">+${amount}</span>`;
  historyLog.prepend(item);
}

function addMoney(amount, reason){
  balance += amount;
  document.getElementById('top-balance').innerText = balance;
  document.getElementById('profile-balance').innerText = balance;
  addHistory(reason, amount);
}

function tap(){
  if(energy<=0){alert('–≠–Ω–µ—Ä–≥–∏—è –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å'); return;}
  energy--;
  balance += 0.005;
  document.getElementById('top-balance').innerText = balance.toFixed(3);
  document.getElementById('profile-balance').innerText = balance.toFixed(3);
  document.getElementById('energy').innerText = energy;
  addHistory("–ö–ª–∏–∫",0.005);
}

function copyRef(){
  const ref = `https://t.me/DifferentEarningsBot?start=${userID}`;
  navigator.clipboard.writeText(ref);
  alert("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞");
}

// ADMIN FUNCTIONS
const adminTasks = document.getElementById('admin-tasks');
let tasks = [];

function createTask(name, desc, link, price){
  const task = {name,desc,link,price};
  tasks.push(task);
  renderTasks();
}

function deleteTask(index){
  tasks.splice(index,1);
  renderTasks();
}

function renderTasks(){
  adminTasks.innerHTML="";
  tasks.forEach((t,i)=>{
    const div = document.createElement('div');
    div.className="glass-card";
    div.innerHTML=`
      <h3>${t.name}</h3>
      <p>${t.desc}</p>
      <p>–¶–µ–Ω–∞: ${t.price}‚ÇΩ</p>
      <button class="action-btn" onclick="window.open('${t.link}','_blank')">–ü–µ—Ä–µ–π—Ç–∏</button>
      <button class="action-btn" style="background:red;margin-top:6px" onclick="deleteTask(${i})">–£–¥–∞–ª–∏—Ç—å</button>
    `;
    adminTasks.appendChild(div);
  });
}

</script>
</body>
</html>
