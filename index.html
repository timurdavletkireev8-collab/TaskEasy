<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Dogs Money</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, get, set, update } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyDeY43dAjpJ2NxHneG4W66veHNBiQ5jhfA",
  authDomain: "dogsmoney.firebaseapp.com",
  databaseURL: "https://dogsmoney-default-rtdb.firebaseio.com",
  projectId: "dogsmoney",
  storageBucket: "dogsmoney.firebasestorage.app",
  messagingSenderId: "339745413806",
  appId: "1:339745413806:web:08f8fdd856ee92a3002b3f"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

window.db = db;
window.ref = ref;
window.get = get;
window.set = set;
window.update = update;
</script>

<style>
*{box-sizing:border-box;font-family:Arial}
body{
margin:0;
background:radial-gradient(circle at top,#fff2d6,#ffd28a);
overflow:hidden;
}

header img{
width:100%;
border-radius:0 0 22px 22px;
}

.page{
position:absolute;
top:0;left:0;
width:100%;height:100%;
padding:16px;
background:transparent;
display:none;
overflow-y:auto;
animation:fade .25s;
}
.page.active{display:block;}

@keyframes fade{
from{opacity:0;transform:translateY(10px)}
to{opacity:1;transform:translateY(0)}
}

.card{
background:#fff;
border-radius:18px;
padding:16px;
margin-bottom:14px;
box-shadow:0 8px 18px rgba(0,0,0,.18);
}

.btn{
width:100%;
padding:15px;
border:none;
border-radius:16px;
font-size:16px;
font-weight:bold;
color:#fff;
background:linear-gradient(135deg,#ff9800,#ff5722);
box-shadow:0 6px 14px rgba(0,0,0,.25);
}

.center{text-align:center}

.nav{
position:fixed;
bottom:0;left:0;
width:100%;
display:flex;
background:#fff;
border-top:2px solid #f3b85c;
z-index:10;
}
.nav button{
flex:1;
padding:14px;
border:none;
font-size:20px;
background:#ffa726;
color:#fff;
}

.bone{
position:fixed;
font-size:24px;
pointer-events:none;
animation:bone 1s forwards;
}
@keyframes bone{
from{opacity:1;transform:translateY(0)}
to{opacity:0;transform:translateY(-60px)}
}
</style>
</head>

<body>

<header>
<img src="https://i.postimg.cc/nrrTt15j/Giga-Chat-36.jpg">
</header>

<!-- üí∞ –ó–ê–†–ê–ë–û–¢–û–ö -->
<div class="page active" id="earn">
<div class="card">
<h3>ü¶¥ –ö–ª–∏–∫–∏</h3>
<button class="btn" onclick="openPage('click')">–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å</button>
</div>
<div class="card">
<h3>üë• –†–µ—Ñ–µ—Ä–∞–ª—ã</h3>
<button class="btn" onclick="openPage('refs')">–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å</button>
</div>
<div class="card">
<h3>üìã –ó–∞–¥–∞–Ω–∏—è</h3>
<button class="btn" onclick="openPage('tasks')">–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å</button>
</div>
</div>

<!-- ü¶¥ –ö–õ–ò–ö–ï–† -->
<div class="page" id="click">
<div class="card center">
<h2>–¢–∞–ø–∞–π ü¶¥</h2>
<button class="btn" onclick="tap()">–¢–ê–ü</button>
<p id="clicks">0</p>
</div>
</div>

<!-- üë§ –ü–†–û–§–ò–õ–¨ -->
<div class="page" id="profile">
<div class="card center">
<img id="photo" width="90" style="border-radius:50%;margin-bottom:8px">
<p id="username"></p>
<p>ID: <span id="uid"></span></p>
<p>–ë–∞–ª–∞–Ω—Å: <span id="balance">0</span> ü™ô</p>
</div>
</div>

<!-- ‚ÑπÔ∏è –ò–ù–§–û -->
<div class="page" id="info">
<div class="card">
<h3>üì¢ –ù–æ–≤–æ—Å—Ç–Ω–æ–π –∫–∞–Ω–∞–ª</h3>
<p>@dogeasymoneybot</p>
</div>
<div class="card">
<h3>üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞</h3>
<p>–ß–µ—Ä–µ–∑ –±–æ—Ç–∞</p>
</div>
<div class="card">
<h3>üìò –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ</h3>
<p>–¢–∞–ø–∞–π ‚Äî –∑–æ–≤–∏ –¥—Ä—É–∑–µ–π ‚Äî –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π</p>
</div>

<!-- üõ† –ê–î–ú–ò–ù–ö–ê -->
<div class="card" id="admin" style="display:none">
<h3>üõ† –ê–¥–º–∏–Ω–∫–∞</h3>
<button class="btn" onclick="alert('–ê–¥–º–∏–Ω –¥–æ—Å—Ç—É–ø OK')">–í–æ–π—Ç–∏</button>
</div>
</div>

<!-- üîª –ù–ê–í–ò–ì–ê–¶–ò–Ø -->
<div class="nav">
<button onclick="openPage('earn')">üí∞</button>
<button onclick="openPage('profile')">üë§</button>
<button onclick="openPage('info')">‚ÑπÔ∏è</button>
</div>

<script type="module">
const tg = window.Telegram.WebApp;
tg.ready(); tg.expand();

let userId=0, clicks=0;

window.openPage=id=>{
document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
document.getElementById(id).classList.add('active');
}

window.tap=()=>{
clicks++;
document.getElementById("clicks").innerText=clicks;
update(ref(db,'users/'+userId),{clicks});
}

document.body.addEventListener('click',e=>{
const b=document.createElement('div');
b.className='bone';
b.innerText='ü¶¥';
b.style.left=e.clientX+'px';
b.style.top=e.clientY+'px';
document.body.appendChild(b);
setTimeout(()=>b.remove(),1000);
});

(function waitUser(){
if(tg.initDataUnsafe?.user){
const u=tg.initDataUnsafe.user;
userId=u.id;

document.getElementById("username").innerText='@'+(u.username||'no');
document.getElementById("uid").innerText=userId;
document.getElementById("photo").src=u.photo_url||'';

if(userId===7020322752){
document.getElementById("admin").style.display='block';
}

get(ref(db,'users/'+userId)).then(s=>{
if(!s.exists()){
set(ref(db,'users/'+userId),{clicks:0,balance:0});
}else{
clicks=s.val().clicks||0;
document.getElementById("clicks").innerText=clicks;
document.getElementById("balance").innerText=s.val().balance||0;
}
});
}else setTimeout(waitUser,100);
})();
</script>

</body>
</html>
