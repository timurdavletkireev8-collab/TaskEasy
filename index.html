<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>EASY MONEY</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
import { getDatabase, ref, set, get, onValue, update, push } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyApcL3hN95djDhI-26L623jHHbzREswfQE",
  authDomain: "cash-1968a.firebaseapp.com",
  databaseURL: "https://cash-1968a-default-rtdb.firebaseio.com",
  projectId: "cash-1968a",
  storageBucket: "cash-1968a.appspot.com",
  messagingSenderId: "234016139024",
  appId: "1:234016139024:web:f11daa0328ff06173d2795",
  measurementId: "G-MFEKWBVN21"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
</script>

<style>
*{box-sizing:border-box}
html,body{margin:0;height:100%;overflow:hidden;font-family:Arial,sans-serif;}
body{background:url("https://i.postimg.cc/2jx4fT8X/Giga-Chat-40.jpg") center/cover no-repeat;color:white;}

/* TOP */
.top{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;}
.title{
  font-size:72px;
  font-weight:900;
  line-height:1.1;
  color:rgba(255,255,255,0.85);
  text-shadow: 0 0 20px rgba(255,255,255,0.6);
}
.balance{
  background:rgba(0,0,0,.55);
  padding:12px 18px;
  border-radius:16px;
  border:2px solid rgba(255,255,255,.8);
  cursor:pointer;
}

/* PAGES */
.page{display:none;padding:24px;height:calc(100% - 180px);overflow-y:auto;}
.page.active{display:block}

/* CARDS */
.card{background:rgba(0,0,0,.45);border-radius:22px;padding:24px;margin-bottom:20px;border:2px solid rgba(255,255,255,.8);}

/* BUTTONS */
.btn{
  width:100%;
  padding:18px;
  margin-top:16px;
  font-size:18px;
  border-radius:18px;
  color:white;
  background:rgba(0,0,0,.5);
  border:2px solid rgba(255,255,255,.8);
  cursor:pointer;
  font-weight:600;
}
.btn-red{background:rgba(255,0,0,0.3);border:2px solid rgba(255,255,255,.8);}

/* INPUT */
input, textarea{width:100%;padding:14px;margin-top:12px;border-radius:14px;border:2px solid rgba(255,255,255,.6);background:rgba(0,0,0,.5);color:white;font-size:16px;}

/* NAV */
.nav{position:fixed;bottom:0;width:100%;height:100px;background:rgba(0,0,0,.6);display:flex;justify-content:space-around;align-items:center;}
.nav div{font-size:32px;opacity:.5;cursor:pointer;}
.nav .active{opacity:1;}

/* CLICK IMAGE */
.click-img{width:180px;height:180px;margin:40px auto;display:block;border-radius:20px;border:3px solid rgba(255,255,255,.9);}
</style>
</head>
<body>

<div class="top">
  <div class="title">EASY MONEY</div>
  <div class="balance" onclick="show('withdraw')">–ë–∞–ª–∞–Ω—Å: <span id="balance">0</span>‚ÇΩ</div>
</div>

<!-- –ó–ê–†–ê–ë–û–¢–û–ö -->
<div id="earn" class="page active">
  <div class="card">
    <button class="btn" onclick="show('referral')">–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –Ω–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞—Ö</button>
    <button class="btn" onclick="show('tasks')">–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –Ω–∞ –∑–∞–¥–∞–Ω–∏—è—Ö</button>
    <button class="btn" onclick="show('click')">–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –Ω–∞ –∫–ª–∏–∫–∞—Ö</button>
  </div>
</div>

<!-- –†–ï–§–ï–†–ê–õ–´ -->
<div id="referral" class="page">
  <div class="card">
    <h3>–ü—Ä–∏–≥–ª–∞—à–∞–π—Ç–µ –¥—Ä—É–∑–µ–π –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ</h3>
    <p>1 –¥—Ä—É–≥ = <b>10‚ÇΩ</b> + 200 —ç–Ω–µ—Ä–≥–∏–∏</p>
    <p id="ref-link"></p>
    <button class="btn" onclick="copyRef()">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
    <button class="btn btn-red" onclick="show('earn')">–ù–∞–∑–∞–¥</button>
  </div>
</div>

<!-- –ó–ê–î–ê–ù–ò–Ø -->
<div id="tasks" class="page">
  <div class="card">
    <h3>–ó–∞–¥–∞–Ω–∏—è</h3>
    <div id="task-list"></div>
    <button class="btn btn-red" onclick="show('earn')">–ù–∞–∑–∞–¥</button>
  </div>
</div>

<!-- –ö–û–ù–ö–†–ï–¢–ù–û–ï –ó–ê–î–ê–ù–ò–ï -->
<div id="taskView" class="page">
  <div class="card">
    <h3 id="task-title"></h3>
    <p id="task-desc"></p>
    <button class="btn" id="task-link-btn">–ü–µ—Ä–µ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ</button>
    <button class="btn" onclick="showReport()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á—ë—Ç</button>
    <button class="btn btn-red" onclick="backToTasks()">–ù–∞–∑–∞–¥</button>
  </div>
</div>

<!-- –û–¢–ß–Å–¢ -->
<div id="report" class="page">
  <div class="card">
    <h3>–û—Ç—á—ë—Ç</h3>
    <textarea id="report-text" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –∏–ª–∏ —Å—Å—ã–ª–∫—É –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç"></textarea>
    <button class="btn" onclick="sendReport()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    <button class="btn btn-red" onclick="show('taskView')">–ù–∞–∑–∞–¥</button>
  </div>
</div>

<!-- –ö–õ–ò–ö–ò -->
<div id="click" class="page">
  <div class="card">
    <p>–ù–∞–∂–∏–º–∞–π—Ç–µ –Ω–∞ –º–æ–Ω–µ—Ç—É ü™ô, —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å!</p>
    <p>–ö–∞–∂–¥—ã–π –∫–ª–∏–∫ +0.005‚ÇΩ, —ç–Ω–µ—Ä–≥–∏—è —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –Ω–∞ 1.</p>
    <p>–í—Å–µ–≥–æ —ç–Ω–µ—Ä–≥–∏–∏: <span id="energy">1000</span>/1000. –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è.</p>
    <img class="click-img"
      src="https://i.postimg.cc/cCspvTn2/Picsart-26-01-03-04-33-45-909.png"
      onclick="tap()">
    <button class="btn btn-red" onclick="show('earn')">–ù–∞–∑–∞–¥</button>
  </div>
</div>

<!-- –ü–†–û–§–ò–õ–¨ -->
<div id="profile" class="page">
  <div class="card">
    <h3>–ü—Ä–æ—Ñ–∏–ª—å</h3>
    <p>ID: <span id="user-id">0</span></p>
    <p>–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è: <span id="done-tasks">0</span></p>
    <p>–û—Ç–∫–ª–æ–Ω—ë–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è: <span id="failed-tasks">0</span></p>
    <h4>–ò—Å—Ç–æ—Ä–∏—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π</h4>
    <div id="history"></div>
    <button class="btn btn-red" onclick="show('withdraw')">–í—ã–≤–µ—Å—Ç–∏</button>
  </div>
</div>

<!-- –í–´–í–û–î -->
<div id="withdraw" class="page">
  <div class="card">
    <h3>–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</h3>
    <p>–ó–¥–µ—Å—å –º–æ–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ –±–∞–ª–∞–Ω—Å.</p>
    <button class="btn btn-red" onclick="show('profile')">–ù–∞–∑–∞–¥</button>
  </div>
</div>

<!-- –ò–ù–§–û–†–ú–ê–¶–ò–Ø -->
<div id="info" class="page">
  <div class="card">
    <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
    <button class="btn" onclick="tg.openTelegramLink('https://t.me/news')">–ù–æ–≤–æ—Å—Ç–∏</button>
    <button class="btn" onclick="tg.openTelegramLink('https://t.me/sup')">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</button>
    <div id="admin-btn-container"></div>
  </div>
</div>

<!-- NAV -->
<div class="nav">
  <div class="active" onclick="show('earn')">üí∞</div>
  <div onclick="show('profile')">üë§</div>
  <div onclick="show('info')">‚ÑπÔ∏è</div>
</div>

<script type="module">
import { getDatabase, ref, set, get, onValue, update, push } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-database.js";

let userID = tg.initDataUnsafe?.user?.id || 0;
document.getElementById('user-id').innerText = userID;
const db = getDatabase();

// –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å–ª–∏ –Ω–µ—Ç
function initUser() {
  const userRef = ref(db,'users/'+userID);
  get(userRef).then(snapshot=>{
    if(!snapshot.exists()){
      set(userRef,{balance:0,energy:1000,doneTasks:0,failedTasks:0,history:[],referrals:0});
    }
  });
}
initUser();

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –∏ —ç–Ω–µ—Ä–≥–∏–∏
function updateUI(){
  const userRef = ref(db,'users/'+userID);
  onValue(userRef, snapshot=>{
    const data = snapshot.val();
    if(data){
      document.getElementById("balance").innerText = data.balance.toFixed(2);
      document.getElementById("energy").innerText = data.energy;
      document.getElementById("done-tasks").innerText = data.doneTasks;
      document.getElementById("failed-tasks").innerText = data.failedTasks;
      const histDiv = document.getElementById("history");
      histDiv.innerHTML = "";
      data.history?.forEach(h=>{
        const d = document.createElement("div");
        d.innerText = h;
        histDiv.prepend(d);
      });
      // —Ä–µ—Ñ–µ—Ä–∞–ª
      document.getElementById('ref-link').innerText = `https://t.me/DifferentEarningsBot?start=${userID}`;
    }
  });
}
updateUI();

// Clicker
function tap(){
  const userRef = ref(db,'users/'+userID);
  get(userRef).then(snapshot=>{
    const data = snapshot.val();
    if(data.energy<=0){alert("–≠–Ω–µ—Ä–≥–∏—è –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å"); return;}
    update(userRef,{energy:data.energy-1,balance:+(data.balance+0.005).toFixed(3)});
  });
}

// Copy referral
function copyRef(){
  const link = `https://t.me/DifferentEarningsBot?start=${userID}`;
  navigator.clipboard.writeText(link);
  alert("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!");
}

// Pages
function show(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

// –ó–∞–¥–∞–Ω–∏—è
const taskListDiv = document.getElementById("task-list");
function loadTasks(){
  const tasksRef = ref(db,'tasks');
  onValue(tasksRef, snapshot=>{
    taskListDiv.innerHTML="";
    snapshot.forEach(child=>{
      const t = child.val();
      const btn = document.createElement("div");
      btn.className="btn";
      btn.innerText = t.name;
      btn.onclick = ()=>openTask(t,child.key);
      taskListDiv.appendChild(btn);
    });
  });
}
loadTasks();

let currentTaskID=null;
function openTask(task,key){
  currentTaskID = key;
  const userRef = ref(db,'users/'+userID+'/taskStatus/'+key);
  get(userRef).then(snapshot=>{
    if(snapshot.exists() && snapshot.val()==="on_check"){alert("–ó–∞–¥–∞–Ω–∏–µ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ, –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–µ–ª—å–∑—è"); return;}
    document.getElementById("task-title").innerText = task.name;
    document.getElementById("task-desc").innerText = task.desc;
    document.getElementById("task-link-btn").onclick = ()=>window.open(task.link,"_blank");
    show('taskView');
  });
}

function showReport(){ show('report'); }
function sendReport(){
  const reportText = document.getElementById("report-text").value;
  if(!reportText){alert("–í–≤–µ–¥–∏—Ç–µ –æ—Ç—á—ë—Ç"); return;}
  const updates={};
  updates[`users/${userID}/taskStatus/${currentTaskID}`]="on_check";
  updates[`tasks/${currentTaskID}/reports`] = push(ref(db,`tasks/${currentTaskID}/reports`)).key; // –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç—á—ë—Ç
  update(ref(db),updates).then(()=>{alert("–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É"); document.getElementById("report-text").value=""; show('tasks');});
}
function backToTasks(){ show('tasks'); }

// Admin button
if(userID===7020322752){
  const adminBtnContainer = document.getElementById('admin-btn-container');
  const btn = document.createElement('button');
  btn.innerText = "–ê–¥–º–∏–Ω–∫–∞";
  btn.className = "btn";
  btn.onclick = ()=>alert("–ê–¥–º–∏–Ω–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∞"); // —Å—é–¥–∞ –¥–æ–±–∞–≤–∏–º –∞–¥–º–∏–Ω—Å–∫–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ–∑–∂–µ
  adminBtnContainer.appendChild(btn);
}
</script>
</body>
</html>
