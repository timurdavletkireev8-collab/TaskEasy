<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Easy Money App</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
:root {
  --gold: #f3e5ab;
  --glass: rgba(0,0,0,0.3);
  --border: rgba(255,255,255,0.3);
  --btn-dark: rgba(0,0,0,0.7);
  --blue-dark: #0f2a45;
  --blue-light: #1a3f6d;
}
body{
  margin:0;
  font-family:'Arial Black',sans-serif;
  background: linear-gradient(to bottom,#1a3f6d,#0f2a45);
  color:white;
  height:100vh;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}

/* HEADER */
.header{
  display:flex;
  justify-content:flex-start;
  padding:15px 20px;
  font-weight:bold;
  font-size:20px;
}
.header-balance{
  margin-left:auto;
  background:var(--glass);
  padding:8px 16px;
  border-radius:12px;
  border:1px solid var(--border);
}

/* TITLE */
.app-title{
  padding-left:20px;
  font-size:28px;
  font-weight:bold;
}

/* MAIN CONTAINER */
.main-container{
  flex:1;
  padding:10px 20px;
  overflow-y:auto;
  margin-bottom:125px; /* –¥–ª—è –Ω–∏–∂–Ω–µ–≥–æ –º–µ–Ω—é */
}

/* GLASS CARD */
.glass-card{
  background:var(--glass);
  backdrop-filter:blur(15px);
  border-radius:15px;
  border:1px solid var(--border);
  padding:18px;
  margin-bottom:12px;
}

/* AVATAR */
.avatar{
  width:80px;
  height:80px;
  border-radius:15px;
  border:2px solid var(--gold);
  margin-bottom:10px;
}

/* PAGE */
.page{display:none;}
.page.active{display:block; animation:fadeIn .3s;}
@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}

/* BUTTONS */
.action-btn{
  padding:12px 18px;
  border:none;
  border-radius:18px;
  background:var(--btn-dark);
  color:white;
  font-weight:bold;
  cursor:pointer;
  margin-top:8px;
  border:1px solid white;
}

/* BOTTOM DOCK */
.bottom-dock{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  height:125px;
  background:var(--blue-dark);
  display:flex;
  justify-content:center;
  align-items:center;
  border-radius:25px 25px 0 0;
}
.nav-container{
  display:flex;
  width:90%;
  justify-content:space-around;
}
.nav-item{
  padding:12px 20px;
  border-radius:35px;
  background:var(--btn-dark);
  border:1px solid white;
  cursor:pointer;
  font-weight:bold;
  transition:0.3s;
}
.nav-item.active{
  background:white;
  color:black;
}

</style>
</head>
<body>
<div class="header">
  Easy Money
  <div class="header-balance">–ë–∞–ª–∞–Ω—Å: <span id="top-balance">0</span>‚ÇΩ</div>
</div>

<div class="main-container">

  <!-- –ó–∞—Ä–∞–±–æ—Ç–æ–∫ -->
  <div id="earn" class="page active">
    <div class="glass-card">
      <h3>–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –¥—Ä—É–∑–µ–π</h3>
      <p>1 –¥—Ä—É–≥ = <b>10‚ÇΩ</b> + 200 —ç–Ω–µ—Ä–≥–∏–∏</p>
      <button class="action-btn" onclick="copyRef()">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
    </div>
    <div class="glass-card">
      <h3>–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π</h3>
      <div id="tasks-list"></div>
    </div>
    <div class="glass-card">
      <h3>–ö–ª–∏–∫–∏</h3>
      <div>–≠–Ω–µ—Ä–≥–∏—è: <span id="energy">1000</span>/1000</div>
      <div style="font-size:70px;cursor:pointer;margin-top:10px;" onclick="tap()">ü™ô</div>
    </div>
  </div>

  <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
  <div id="profile" class="page">
    <div class="glass-card">
      <img id="user-avatar" class="avatar" src="https://via.placeholder.com/80" alt="Avatar">
      <h3 id="user-name">User</h3>
      <p>–ë–∞–ª–∞–Ω—Å: <span id="profile-balance">0</span>‚ÇΩ</p>
      <h4>–ò—Å—Ç–æ—Ä–∏—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π</h4>
      <div id="history-log"></div>
    </div>
  </div>

  <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
  <div id="info" class="page">
    <div class="glass-card">
      <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
      <button class="action-btn" onclick="tg.openTelegramLink('https://t.me/news')">–ù–æ–≤–æ—Å—Ç–∏</button>
      <button class="action-btn" onclick="tg.openTelegramLink('https://t.me/sup')">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</button>
      <div id="admin-btn-container"></div>
    </div>
  </div>

  <!-- –ê–¥–º–∏–Ω–∫–∞ -->
  <div id="admin" class="page">
    <div class="glass-card">
      <h3>–ê–¥–º–∏–Ω–∫–∞</h3>
      <div id="admin-tasks"></div>
      <button class="action-btn" onclick="createTaskPrompt()">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ</button>
    </div>
  </div>

</div>

<div class="bottom-dock">
  <div class="nav-container">
    <div class="nav-item active" id="nav-earn" onclick="showPage('earn')">üí∞</div>
    <div class="nav-item" id="nav-profile" onclick="showPage('profile')">üë§</div>
    <div class="nav-item" id="nav-info" onclick="showPage('info')">‚ÑπÔ∏è</div>
    <div class="nav-item" id="nav-admin" style="display:none" onclick="showPage('admin')">üõ†</div>
  </div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

let balance = 0;
let energy = 1000;
const adminID = 7020322752;
const userID = tg.initDataUnsafe?.user?.id || 0;
const historyLog = document.getElementById('history-log');
const adminTasks = document.getElementById('admin-tasks');
let tasks = [];

// –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
if(tg.initDataUnsafe?.user){
  document.getElementById('user-name').innerText = tg.initDataUnsafe.user.first_name;
  if(tg.initDataUnsafe.user.photo_url) document.getElementById('user-avatar').src = tg.initDataUnsafe.user.photo_url;
}

// –ö–Ω–æ–ø–∫–∞ –∞–¥–º–∏–Ω–∞
if(userID == adminID){
  document.getElementById('nav-admin').style.display='flex';
  const adminBtnContainer = document.getElementById('admin-btn-container');
  const btn = document.createElement('button');
  btn.innerText = "–û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω–∫—É";
  btn.className = "action-btn";
  btn.onclick = ()=> showPage('admin');
  adminBtnContainer.appendChild(btn);
}

// –§—É–Ω–∫—Ü–∏–∏
function showPage(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  const navId = document.getElementById('nav-'+id);
  if(navId) navId.classList.add('active');
}

function addHistory(reason, amount){
  const item = document.createElement('div');
  item.innerHTML = `<span>${reason}</span> <span style="color:var(--gold)">+${amount}</span>`;
  historyLog.prepend(item);
}

function addMoney(amount, reason){
  balance += amount;
  document.getElementById('top-balance').innerText = balance.toFixed(2);
  document.getElementById('profile-balance').innerText = balance.toFixed(2);
  addHistory(reason, amount);
}

function tap(){
  if(energy<=0){alert('–≠–Ω–µ—Ä–≥–∏—è –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å'); return;}
  energy--;
  addMoney(0.005,"–ö–ª–∏–∫");
  document.getElementById('energy').innerText = energy;
}

function copyRef(){
  const ref = `https://t.me/DifferentEarningsBot?start=${userID}`;
  navigator.clipboard.writeText(ref);
  alert("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞");
}

// –ê–¥–º–∏–Ω–∫–∞
function createTask(name, desc, link, price){
  const task={name,desc,link,price};
  tasks.push(task);
  renderTasks();
}
function deleteTask(index){
  tasks.splice(index,1);
  renderTasks();
}
function renderTasks(){
  adminTasks.innerHTML="";
  tasks.forEach((t,i)=>{
    const div = document.createElement('div');
    div.className="glass-card";
    div.innerHTML=`
      <h4>${t.name}</h4>
      <p>${t.desc}</p>
      <p>–¶–µ–Ω–∞: ${t.price}‚ÇΩ</p>
      <button class="action-btn" onclick="window.open('${t.link}','_blank')">–ü–µ—Ä–µ–π—Ç–∏</button>
      <button class="action-btn" style="background:red;margin-top:6px" onclick="deleteTask(${i})">–£–¥–∞–ª–∏—Ç—å</button>
    `;
    adminTasks.appendChild(div);
  });
}
function createTaskPrompt(){
  const name=prompt("–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è:");
  const desc=prompt("–û–ø–∏—Å–∞–Ω–∏–µ:");
  const link=prompt("–°—Å—ã–ª–∫–∞:");
  const price=prompt("–¶–µ–Ω–∞:");
  if(name && desc && link && price) createTask(name,desc,link,price);
}

// –ü—Ä–∏–º–µ—Ä –∑–∞–¥–∞–Ω–∏—è
tasks.push({name:"–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ",desc:"–û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è",link:"https://t.me/",price:5});
renderTasks();
</script>
</body>
</html>
